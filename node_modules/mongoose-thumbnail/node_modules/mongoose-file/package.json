{
  "name": "mongoose-file",
  "description": "Mongoose plugin adding a file field to a schema - useful for nodejs file uploads",
  "version": "0.0.2",
  "homepage": "https://github.com/panta/mongoose-file",
  "author": {
    "name": "Marco Pantaleoni",
    "email": "marco.pantaleoni@gmail.com"
  },
  "dependencies": {
    "mongoose": ">= 3.0.1",
    "mkdirp": ">= 0.3.4"
  },
  "devDependencies": {
    "coffee-script": ">= 1.3.3",
    "muffin": ">= 0.6.2",
    "glob": ">= 3.0.1",
    "mocha": ">= 1.4.2",
    "chai": ">= 1.2.0"
  },
  "keywords": [
    "mongoose",
    "plugin",
    "plugins",
    "types",
    "file",
    "upload",
    "express"
  ],
  "repository": {
    "type": "git",
    "url": "git://github.com/panta/mongoose-file.git"
  },
  "bugs": {
    "url": "https://github.com/panta/mongoose-file/issues"
  },
  "licenses": [
    {
      "type": "MIT",
      "url": "https://raw.github.com/panta/mongoose-file/master/LICENSE"
    }
  ],
  "directories": {
    "lib": "./lib",
    "test": "./test"
  },
  "scripts": {
    "watch": "coffee -c -w  -o lib src",
    "test": "NODE_ENV=test node_modules/.bin/mocha --compilers coffee:coffee-script --timeout 10000 -R spec test/*.coffee"
  },
  "main": "lib/index.js",
  "engines": {
    "node": ">= 0.6.0",
    "npm": ">= 1.0.0"
  },
  "readme": "## About mongoose-file\n\n[mongoose][] plugin that adds a file field to a mongoose schema.\nThis is especially suited to handle file uploads with [nodejs][]/[expressjs][].\n\n## Install\n\nnpm install mongoose-file\n\n## Usage\n\nThe plugin adds a file field to the mongoose schema. Assigning to the **file** property of the field causes (optionally) the file to be moved into place (see `upload_to` below) and the field sub-properties to be assigned.\nThis field expects to be assigned (to its `file` sub-field, as said) an object with a semantic like that of an [expressjs][] request file object (see [req.files](http://expressjs.com/api.html#req.files)).\nAssigning to the field `file` property caused the instance to be marked as modified (but it's not saved automatically).\n\nThe field added to the schema is a compound JavaScript object, containing the following fields:\n\n* `name` - original name of the uploaded file, without the directory components\n* `path` - the full final path where the uploaded file is stored\n* `rel` - path relative to a user specified directory (see the `relative_to` option below)\n* `type` - the file type\n* `size` - the file size\n* `lastModified` - the uploaded file object `lastModifiedDate` value\n\nThese values are extracted from the request-like file object received on assignment.\n\nWhen attaching the plugin, it's possible to specify an options object containing the following parameters:\n\n* `name` - the field name (`name`), which defaults to `file`\n* `change_cb` - a callback function called whenever the file path is changed. It's called in the context of the model instance, and receives as parameters the field name, the new path value and the previous one.\n* `upload_to` - the directory name where the file will be moved from the temporary upload directory. If this is a function instead of a string, it will be called in the context of the model instance with the file object as a parameter, and it must return a string\n* `relative_to` - the base directory name used to construct the relative path stored in the `rel` subfield. If this is a function, it will be called in the context of the model instance with the file object as a parameter. This can be useful to get a path usable from HTML, like in `<img>` `src` attribute.\n\n### JavaScript\n\n```javascript\nvar mongoose = require('mongoose');\nvar filePluginLib = require('mongoose-file');\nvar filePlugin = filePluginLib.filePlugin;\nvar make_upload_to_model = filePluginLib.make_upload_to_model;\n\n...\n\nvar uploads_base = path.join(__dirname, \"uploads\");\nvar uploads = path.join(uploads_base, \"u\");\n...\n\nvar SampleSchema = new Schema({\n  ...\n});\nSampleSchema.plugin(filePlugin, {\n\tname: \"photo\",\n\tupload_to: make_upload_to_model(uploads, 'photos'),\n\trelative_to: uploads_base\n});\nvar SampleModel = db.model(\"SampleModel\", SampleSchema);\n```\n\n### [CoffeeScript][]\n\n```coffeescript\nmongoose = require 'mongoose'\nfilePluginLib = require 'mongoose-file'\nfilePlugin = filePluginLib.filePlugin\nmake_upload_to_model = filePluginLib.make_upload_to_model\n\n...\nuploads_base = path.join(__dirname, \"uploads\")\nuploads = path.join(uploads_base, \"u\")\n...\n\nSampleSchema = new Schema\n  ...\nSampleSchema.plugin filePlugin\n\tname: \"photo\"\n\tupload_to: make_upload_to_model(uploads, 'photos')\n\trelative_to: uploads_base\nSampleModel = db.model(\"SampleModel\", SampleSchema)\n```\n\n## Bugs and pull requests\n\nPlease use the github [repository][] to notify bugs and make pull requests.\n\n## License\n\nThis software is Â© 2012 Marco Pantaleoni, released under the MIT licence. Use it, fork it.\n\nSee the LICENSE file for details.\n\n[mongoose]: http://mongoosejs.com\n[CoffeeScript]: http://jashkenas.github.com/coffee-script/\n[nodejs]: http://nodejs.org/\n[expressjs]: http://expressjs.com\n[Mocha]: http://visionmedia.github.com/mocha/\n[repository]: http://github.com/panta/mongoose-file\n",
  "_id": "mongoose-file@0.0.2",
  "dist": {
    "shasum": "779ce129df074207898c189480472b18267ba5ac",
    "tarball": "http://registry.npmjs.org/mongoose-file/-/mongoose-file-0.0.2.tgz"
  },
  "_npmVersion": "1.1.61",
  "_npmUser": {
    "name": "panta",
    "email": "marco.pantaleoni+npm@gmail.com"
  },
  "maintainers": [
    {
      "name": "panta",
      "email": "marco.pantaleoni+npm@gmail.com"
    }
  ],
  "_shasum": "779ce129df074207898c189480472b18267ba5ac",
  "_from": "mongoose-file@>= 0.0.2",
  "_resolved": "https://registry.npmjs.org/mongoose-file/-/mongoose-file-0.0.2.tgz"
}
